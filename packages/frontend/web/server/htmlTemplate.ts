import resetCSS from /* preval */ '@frontend/lib/reset-css';
import { getFontsCss } from '@frontend/lib/fonts-css';
import { getStatic } from '@frontend/lib/assets';

export const htmlTemplate = ({
    title = 'The Guardian',
    linkedData,
    priorityScripts,
    lowPriorityScripts,
    css,
    html,
    data,
    cssIDs,
    nonBlockingJS = '',
    fontFiles = [],
}: {
    title?: string;
    linkedData: object;
    priorityScripts: string[];
    lowPriorityScripts: string[];
    css: string;
    html: string;
    data: {
        page: string;
        site: string;
    };
    cssIDs: string[];
    nonBlockingJS?: string;
    fontFiles?: string[];
}) => {
    const favicon =
        process.env.NODE_ENV === 'production'
            ? 'favicon-32x32.ico'
            : 'favicon-32x32-dev-yellow.ico';

    return `<!doctype html>
        <html>
            <head>
                <title>${title}</title>
                <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
                <link rel="icon" href="https://static.guim.co.uk/images/${favicon}">

                <script type="application/ld+json">
                    ${JSON.stringify(linkedData)}
                </script>

                ${priorityScripts
                    .map(
                        url => `<link rel="preload" href="${url}" as="script">`,
                    )
                    .join('\n')}
                ${fontFiles
                    .map(
                        fontFile =>
                            `<link rel="preload" href="${getStatic(
                                fontFile,
                            )}" as="font" crossorigin>`,
                    )
                    .join('\n')}
                <style>${getFontsCss()}${resetCSS}${css}</style>
                <script>
                window.guardian = ${JSON.stringify({
                    // app: {
                    //     data,
                    //     cssIDs,
                    // },
                    // config: {
                    //     tests: {
                    //         renderer: 'new',
                    //     },
                    // },
                    adBlockers: {
                        active: undefined,
                        onDetect: [],
                    },
                })};
                window.guardian.config = {"page":{"avatarApiUrl":"https://avatar.code.dev-theguardian.com","isColumn":false,"membershipUrl":"https://mem.thegulocal.com","headline":"Alex Salmond's aides accused of trying to smear Nicola Sturgeon","isImmersive":false,"author":"Severin Carrell","toneIds":"tone/news","isProd":false,"discussionFrontendUrl":"https://s3-eu-west-1.amazonaws.com/com-gu-discussion-frontend/CODE/static/discussion-frontend.preact.iife.8bdbd9194e.js","membershipAccess":"","allowUserGeneratedContent":false,"commissioningDesks":"uk-home-news","webPublicationDate":1547468724000,"forecastsapiurl":"/weatherapi/forecast","idOAuthUrl":"https://oauth.thegulocal.com","supportUrl":"https://support.theguardian.com","webTitle":"Alex Salmond's aides accused of trying to smear Nicola Sturgeon","isPhotoEssay":false,"isFront":false,"inBodyInternalLinkCount":1,"idWebAppUrl":"https://oauth.thegulocal.com","googleSearchUrl":"//www.google.co.uk/cse/cse.js","inBodyExternalLinkCount":0,"showRelatedContent":true,"lightboxImages":{"id":"politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","headline":"Alex Salmond's aides accused of trying to smear Nicola Sturgeon","shouldHideAdverts":false,"standfirst":"<p>First minister’s spokesman claimed Salmond’s team lied about when Sturgeon first knew of harassment claims</p>","images":[{"caption":"The latest developments mark a new low in the fractious relationship between Nicola Sturgeon and Alex Salmond.","credit":"Photograph: Ken Jack/Getty Images","displayCredit":true,"src":"https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=700&quality=85&auto=format&fit=max&s=3bc1aa1ccb5e0ac0b88280cc0b6dfae0","srcsets":"https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=1920&quality=85&auto=format&fit=max&s=ebdfbabc8508c712bbc7a172c1d01634 1920w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=1225&quality=85&auto=format&fit=max&s=06df9653f95f26c0506273c05017c27b 1225w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=1065&quality=85&auto=format&fit=max&s=705568c39309fbe0c78d7f8d27166bd5 1065w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=965&quality=85&auto=format&fit=max&s=979618072c729bc435b2c041fe758681 965w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=725&quality=85&auto=format&fit=max&s=6b9d3113a33a9d5f187abdb7b4c9c6d3 725w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=645&quality=85&auto=format&fit=max&s=8609985b0cfe2af8c112384b11142c33 645w, https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/master/3880.jpg?width=465&quality=85&auto=format&fit=max&s=966ebb07cdec366b6be375e37cab8c5b 465w","sizes":"(min-width: 1300px) 1920px, (min-width: 1140px) 1225px, (min-width: 980px) 1065px, (min-width: 740px) 965px, (min-width: 660px) 725px, (min-width: 480px) 645px, 465px","ratio":1.6666666666666667,"role":"None","parentContentId":"politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","id":"politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon"}]},"googleSearchId":"007466294097402385199:m2ealvuxh1i","tones":"News","shouldHideReaderRevenue":false,"idUrl":"https://profile.thegulocal.com","hasInlineMerchandise":false,"omnitureAmpAccount":"guardiangudev-code","dfpAdUnitRoot":"theguardian.com","trackingNames":"UK Home News","host":"http://m.thegulocal.com","hasShowcaseMainElement":false,"blogIds":"","sectionName":"Politics","hasMultipleVideosInPage":false,"fbAppId":"202314643182694","isContent":true,"shortUrlId":"/p/aen24","dfpAccountId":"59666047","plistaPublicApiKey":"462925f4f131001fd974bebe","wordCount":564,"cardStyle":"news","adUnit":"/59666047/theguardian.com/politics/article/ng","discussionApiUrl":"https://discussion.code.dev-theguardian.com/discussion-api","isSensitive":false,"ophanEmbedJsUrl":"//j.ophan.co.uk/ophan.embed","edition":"UK","userAttributesApiUrl":"https://members-data-api.theguardian.com/user-attributes","videoDuration":null,"blogs":"","discussionApiClientHeader":"nextgen-dev","section":"politics","dfpHost":"pubads.g.doubleclick.net","weatherapiurl":"/weatherapi/city","sentryPublicApiKey":"344003a8d11c41d8800fbad8383fdc50","shortUrl":"https://gu.com/p/aen24","thumbnail":"https://i.guim.co.uk/img/media/bfb15a2aa96d150b10f6e0fecc17deeb22ca3a59/0_132_3880_2328/500.jpg?quality=85&auto=format&fit=max&s=6b1a6d8c29ffdde5fa45dd0dece880bf","pillar":"News","pageId":"politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","references":[{"rich-link":"https://www.theguardian.com/info/2015/dec/08/daily-email-uk"}],"sonobiHeaderBiddingJsUrl":"//api.nextgen.guardianapps.co.uk/morpheus.theguardian.12919.js","beaconUrl":"","commentable":false,"discussionD2Uid":"zHoBy6HNKsk","ophanJsUrl":"//j.ophan.co.uk/ophan.ng","contributorBio":"","keywordIds":"politics/scotland,uk/scotland,politics/politics,uk/uk","contentType":"Article","isDev":true,"isHosted":false,"facebookIaAdUnitRoot":"facebook-instant-articles","stripePublicToken":"pk_test_Qm3CGRdrV4WfGYCpm0sftR0f","omnitureAccount":"guardiangudev-code","locationapiurl":"/weatherapi/locations?query=","authorIds":"profile/severincarrell","isPaidContent":false,"hasYouTubeAtom":false,"externalEmbedHost":"https://embed.theguardian.com","thirdPartyAppsAccount":"guardiangudev-code","ajaxUrl":"http://localhost:9000","byline":"Severin Carrell Scotland editor","keywords":"Scottish politics,Scotland,Politics,UK news","contentId":"politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","nonKeywordTagIds":"type/article,tone/news,profile/severincarrell,tracking/commissioningdesk/uk-home-news","mobileAppsAdUnitRoot":"beta-guardian-app","hasPageSkin":false,"requiresMembershipAccess":false,"revisionNumber":"c007f312bd18c8c3397714eb4b2a505633ab1fda","optimizeEpicUrl":"https://support.theguardian.com/epic/control/index.html","hbImpl":"none","assetsPath":"/assets/","mmaUrl":"https://manage.theguardian.com","dfpNonRefreshableLineItemIds":[],"isLive":false,"richLink":"https://www.theguardian.com/info/2015/dec/08/daily-email-uk","campaigns":[],"isLiveBlog":false,"pageCode":"5606797","avatarImagesUrl":"https://avatar.guimcode.co.uk","publication":"theguardian.com","sentryHost":"app.getsentry.com/35463","buildNumber":"DEV","sharedAdTargeting":{"ct":"article","co":["severincarrell"],"url":"/politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","su":["4","5"],"edition":"uk","tn":["news"],"p":"ng","k":["politics","uk/uk","scotland"],"sh":"https://gu.com/p/aen24"},"onwardWebSocket":"wss://frontend-OnwardLo-G3SS42I4G3PN-384008737.eu-west-1.elb.amazonaws.com/recently-published","productionOffice":"Uk","shouldHideAdverts":false,"pbIndexSites":[{"bp":"D","id":208229},{"bp":"M","id":213502},{"bp":"T","id":215437}],"googletagJsUrl":"//www.googletagservices.com/tag/js/gpt.js","idApiUrl":"https://id.code.dev-guardianapis.com","isPreview":false,"appNexusPageTargeting":"sens=f,pt1=/politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon,pt2=uk,pt3=article,pt4=ng,pt5=politics,pt5=uk/uk,pt5=scotland,pt6=4,pt6=5,pt7=wide,pt9=|jqwdk27s2i3dwpji2ohh|severincarrell|news|","pageAdTargeting":{"sens":"f","pv":"jqwdk27s2i3dwpji2ohh","bp":"wide","si":"f","fr":"3","cc":"GB","s":"politics","ct":"article","co":["severincarrell"],"url":"/politics/2019/jan/14/alex-salmond-aides-accused-of-trying-to-smear-nicola-sturgeon","su":["4","5"],"edition":"uk","tn":["news"],"p":"ng","k":["politics","uk/uk","scotland"],"sh":"https://gu.com/p/aen24"}},"nav":{"currentUrl":"/uk/scotland","pillars":[{"title":"News","url":"/","longTitle":"Headlines","iconName":"home","children":[{"title":"UK","url":"/uk-news","longTitle":"UK news","iconName":"","children":[{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Media","url":"/media","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Law","url":"/law","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wales","url":"/uk/wales","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Northern Ireland","url":"/uk/northernireland","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"World","url":"/world","longTitle":"World news","iconName":"","children":[{"title":"Europe","url":"/world/europe-news","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"US","url":"/us-news","longTitle":"US news","iconName":"","children":[],"classList":[]},{"title":"Americas","url":"/world/americas","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Asia","url":"/world/asia","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Australia","url":"/australia-news","longTitle":"Australia news","iconName":"","children":[],"classList":[]},{"title":"Middle East","url":"/world/middleeast","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Africa","url":"/world/africa","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Inequality","url":"/inequality","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cities","url":"/cities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Global development","url":"/global-development","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Business","url":"/business","longTitle":"","iconName":"","children":[{"title":"Economics","url":"/business/economics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Banking","url":"/business/banking","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Money","url":"/money","longTitle":"","iconName":"","children":[{"title":"Property","url":"/money/property","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pensions","url":"/money/pensions","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Savings","url":"/money/savings","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Borrowing","url":"/money/debt","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Careers","url":"/money/work-and-careers","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Markets","url":"/business/stock-markets","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Project Syndicate","url":"/business/series/project-syndicate-economists","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"B2B","url":"/business-to-business","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Football","url":"/football","longTitle":"","iconName":"","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live","iconName":"","children":[],"classList":[]},{"title":"Tables","url":"/football/tables","longTitle":"football/tables","iconName":"","children":[],"classList":[]},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures","iconName":"","children":[],"classList":[]},{"title":"Results","url":"/football/results","longTitle":"football/results","iconName":"","children":[],"classList":[]},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions","iconName":"","children":[],"classList":[]},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams","iconName":"","children":[],"classList":[]},{"title":"World Cup 2018","url":"/football/world-cup-2018","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Environment","url":"/environment","longTitle":"","iconName":"","children":[{"title":"Climate change","url":"/environment/climate-change","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wildlife","url":"/environment/wildlife","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Energy","url":"/environment/energy","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pollution","url":"/environment/pollution","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Science","url":"/science","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Tech","url":"/technology","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Global development","url":"/global-development","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cities","url":"/cities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Obituaries","url":"/tone/obituaries","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Opinion","url":"/commentisfree","longTitle":"Opinion home","iconName":"home","children":[{"title":"The Guardian view","url":"/profile/editorial","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Columnists","url":"/index/contributors","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cartoons","url":"/cartoons/archive","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Opinion videos","url":"/commentisfree/series/comment-is-free-weekly","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Letters","url":"/tone/letters","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Sport","url":"/sport","longTitle":"Sport home","iconName":"home","children":[{"title":"Football","url":"/football","longTitle":"","iconName":"","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live","iconName":"","children":[],"classList":[]},{"title":"Tables","url":"/football/tables","longTitle":"football/tables","iconName":"","children":[],"classList":[]},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures","iconName":"","children":[],"classList":[]},{"title":"Results","url":"/football/results","longTitle":"football/results","iconName":"","children":[],"classList":[]},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions","iconName":"","children":[],"classList":[]},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams","iconName":"","children":[],"classList":[]},{"title":"World Cup 2018","url":"/football/world-cup-2018","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Rugby union","url":"/sport/rugby-union","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cricket","url":"/sport/cricket","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Tennis","url":"/sport/tennis","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cycling","url":"/sport/cycling","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"F1","url":"/sport/formulaone","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Golf","url":"/sport/golf","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Boxing","url":"/sport/boxing","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Rugby league","url":"/sport/rugbyleague","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Racing","url":"/sport/horse-racing","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"US sports","url":"/sport/us-sport","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Culture","url":"/culture","longTitle":"Culture home","iconName":"home","children":[{"title":"Film","url":"/film","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Music","url":"/music","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"TV & radio","url":"/tv-and-radio","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Books","url":"/books","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Art & design","url":"/artanddesign","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Stage","url":"/stage","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Games","url":"/games","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Classical","url":"/music/classicalmusicandopera","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Lifestyle","url":"/lifeandstyle","longTitle":"Lifestyle home","iconName":"home","children":[{"title":"Fashion","url":"/fashion","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Food","url":"/food","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Recipes","url":"/tone/recipes","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Travel","url":"/travel","longTitle":"","iconName":"","children":[{"title":"UK","url":"/travel/uk","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Europe","url":"/travel/europe","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"US","url":"/travel/usa","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Health & fitness","url":"/lifeandstyle/health-and-wellbeing","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Women","url":"/lifeandstyle/women","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Men","url":"/lifeandstyle/men","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Love & sex","url":"/lifeandstyle/love-and-sex","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Beauty","url":"/fashion/beauty","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Home & garden","url":"/lifeandstyle/home-and-garden","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Money","url":"/money","longTitle":"","iconName":"","children":[{"title":"Property","url":"/money/property","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pensions","url":"/money/pensions","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Savings","url":"/money/savings","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Borrowing","url":"/money/debt","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Careers","url":"/money/work-and-careers","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Cars","url":"/technology/motoring","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]}],"otherLinks":[{"title":"The Guardian app","url":"https://www.theguardian.com/mobile/2014/may/29/the-guardian-for-mobile-and-tablet","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Video","url":"/video","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Podcasts","url":"/podcasts","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pictures","url":"/inpictures","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Newsletters","url":"/email-newsletters","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Today's paper","url":"/theguardian","longTitle":"","iconName":"","children":[{"title":"Obituaries","url":"/tone/obituaries","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"G2","url":"/theguardian/g2","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Weekend","url":"/theguardian/weekend","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"The Guide","url":"/theguardian/theguide","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Saturday review","url":"/theguardian/guardianreview","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Inside the Guardian","url":"https://www.theguardian.com/membership","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"The Observer","url":"/observer","longTitle":"","iconName":"","children":[{"title":"Comment","url":"/theobserver/news/comment","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"The New Review","url":"/theobserver/new-review","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Observer Magazine","url":"/theobserver/magazine","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Guardian Weekly","url":"https://www.theguardian.com/weekly?INTCMP=gdnwb_mawns_editorial_gweekly_GW_TopNav_UK","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Professional networks","url":"/guardian-professional","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Crosswords","url":"/crosswords","longTitle":"","iconName":"","children":[{"title":"Blog","url":"/crosswords/crossword-blog","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Editor","url":"/crosswords/series/crossword-editor-update","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Quick","url":"/crosswords/series/quick","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cryptic","url":"/crosswords/series/cryptic","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Prize","url":"/crosswords/series/prize","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Weekend","url":"/crosswords/series/weekend-crossword","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Quiptic","url":"/crosswords/series/quiptic","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Genius","url":"/crosswords/series/genius","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Speedy","url":"/crosswords/series/speedy","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Everyman","url":"/crosswords/series/everyman","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Azed","url":"/crosswords/series/azed","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Guardian Masterclasses","url":"/guardian-masterclasses","longTitle":"","iconName":"","children":[{"title":"Journalism","url":"/guardian-masterclasses/journalism","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Digital","url":"/guardian-masterclasses/digital","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Business","url":"/guardian-masterclasses/business","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Creative writing","url":"/guardian-masterclasses/writing-and-publishing","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wellbeing & Culture","url":"/guardian-masterclasses/culture","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Bespoke training","url":"/guardian-masterclasses/corporate-training","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Calendar","url":"/guardian-masterclasses/calendar","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]}],"brandExtensions":[{"title":"Search jobs","url":"https://jobs.theguardian.com?INTCMP=jobs_uk_web_newheader","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Dating","url":"https://soulmates.theguardian.com?INTCMP=soulmates_uk_web_newheader","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Holidays","url":"https://holidays.theguardian.com?INTCMP=holidays_uk_web_newheader","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Masterclasses","url":"https://membership.theguardian.com/masterclasses?INTCMP=masterclasses_uk_web_newheader","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Digital Archive","url":"https://theguardian.newspapers.com","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Patrons","url":"https://patrons.theguardian.com/?INTCMP=header_patrons","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Discount Codes","url":"https://discountcode.theguardian.com/uk?INTCMP=guardian_header","longTitle":"","iconName":"","children":[],"classList":[]}],"currentNavLink":{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},"currentParent":{"title":"UK","url":"/uk-news","longTitle":"UK news","iconName":"","children":[{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Media","url":"/media","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Law","url":"/law","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wales","url":"/uk/wales","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Northern Ireland","url":"/uk/northernireland","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},"currentPillar":{"title":"News","url":"/","longTitle":"Headlines","iconName":"home","children":[{"title":"UK","url":"/uk-news","longTitle":"UK news","iconName":"","children":[{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Media","url":"/media","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Law","url":"/law","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wales","url":"/uk/wales","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Northern Ireland","url":"/uk/northernireland","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"World","url":"/world","longTitle":"World news","iconName":"","children":[{"title":"Europe","url":"/world/europe-news","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"US","url":"/us-news","longTitle":"US news","iconName":"","children":[],"classList":[]},{"title":"Americas","url":"/world/americas","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Asia","url":"/world/asia","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Australia","url":"/australia-news","longTitle":"Australia news","iconName":"","children":[],"classList":[]},{"title":"Middle East","url":"/world/middleeast","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Africa","url":"/world/africa","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Inequality","url":"/inequality","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cities","url":"/cities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Global development","url":"/global-development","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Business","url":"/business","longTitle":"","iconName":"","children":[{"title":"Economics","url":"/business/economics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Banking","url":"/business/banking","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Money","url":"/money","longTitle":"","iconName":"","children":[{"title":"Property","url":"/money/property","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pensions","url":"/money/pensions","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Savings","url":"/money/savings","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Borrowing","url":"/money/debt","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Careers","url":"/money/work-and-careers","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Markets","url":"/business/stock-markets","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Project Syndicate","url":"/business/series/project-syndicate-economists","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"B2B","url":"/business-to-business","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Football","url":"/football","longTitle":"","iconName":"","children":[{"title":"Live scores","url":"/football/live","longTitle":"football/live","iconName":"","children":[],"classList":[]},{"title":"Tables","url":"/football/tables","longTitle":"football/tables","iconName":"","children":[],"classList":[]},{"title":"Fixtures","url":"/football/fixtures","longTitle":"football/fixtures","iconName":"","children":[],"classList":[]},{"title":"Results","url":"/football/results","longTitle":"football/results","iconName":"","children":[],"classList":[]},{"title":"Competitions","url":"/football/competitions","longTitle":"football/competitions","iconName":"","children":[],"classList":[]},{"title":"Clubs","url":"/football/teams","longTitle":"football/teams","iconName":"","children":[],"classList":[]},{"title":"World Cup 2018","url":"/football/world-cup-2018","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Environment","url":"/environment","longTitle":"","iconName":"","children":[{"title":"Climate change","url":"/environment/climate-change","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wildlife","url":"/environment/wildlife","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Energy","url":"/environment/energy","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Pollution","url":"/environment/pollution","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Science","url":"/science","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Tech","url":"/technology","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Global development","url":"/global-development","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Cities","url":"/cities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Obituaries","url":"/tone/obituaries","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},"subNavSections":{"parent":{"title":"UK","url":"/uk-news","longTitle":"UK news","iconName":"","children":[{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Media","url":"/media","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Law","url":"/law","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wales","url":"/uk/wales","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Northern Ireland","url":"/uk/northernireland","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},"links":[{"title":"UK politics","url":"/politics","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Education","url":"/education","longTitle":"","iconName":"","children":[{"title":"Schools","url":"/education/schools","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Teachers","url":"/teacher-network","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Universities","url":"/education/universities","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Students","url":"/education/students","longTitle":"","iconName":"","children":[],"classList":[]}],"classList":[]},{"title":"Media","url":"/media","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Society","url":"/society","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Law","url":"/law","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Scotland","url":"/uk/scotland","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Wales","url":"/uk/wales","longTitle":"","iconName":"","children":[],"classList":[]},{"title":"Northern Ireland","url":"/uk/northernireland","longTitle":"","iconName":"","children":[],"classList":[]}]}},"switches":{"audioOnwardJourneySwitch":false,"idEmailSignInUpsell":false,"idCookieRefresh":false,"boostGaUserTimingFidelity":false,"thirdPartyEmbedTracking":false,"scrollDepth":false,"enableSentryReporting":false,"ophan":true,"serviceWorkerEnabled":true,"discussionPageSize":false,"externalVideoEmbeds":false,"relatedContent":true,"autoRefresh":false,"lazyLoadContainers":false,"enableDiscussionSwitch":true,"registerWithPhone":false,"discussionAllowAnonymousRecommendsSwitch":false,"discussionAllPageSize":false,"prebidS2sozone":false,"prebidAdYouLike":false,"prebidXaxis":false,"prebidImproveDigital":true,"prebidTrustx":true,"prebidPubmatic":false,"prebidOpenx":false,"prebidIndexExchange":true,"prebidAppnexusInvcode":false,"prebidAppnexusUkRow":false,"prebidAppnexus":false,"prebidSonobi":true,"prebidUserSync":false,"prebidAnalytics":false,"commercialPageViewAnalytics":false,"enableConsentManagementService":false,"lotame":false,"kruxVideoTracking":true,"membershipEngagementBannerBlockAu":false,"membershipEngagementBannerBlockUs":false,"membershipEngagementBannerBlockUk":false,"membershipEngagementBanner":true,"simpleReach":false,"remarketing":false,"doubleclickYoutubeAdFree":false,"krux":false,"adomik":false,"inizio":false,"imrWorldwide":false,"tourismAustralia":false,"adFreeStrictExpiryEnforcement":false,"blockIas":false,"surveys":false,"iasAdTargeting":false,"carrotTrafficDriver":false,"commercial":true,"abAcquisitionsBannerAustraliaPostOneMillion":false,"abAcquisitionsEpicUsTopTickerFinal":true,"abAcquisitionsEpicAuPostOneMillion":false,"abAcquisitionsBannerUsEoyFinal":true,"abAcquisitionsBannerFromGoogleDocFiveVariants":false,"abAcquisitionsBannerFromGoogleDocFourVariants":false,"abAcquisitionsBannerFromGoogleDocThreeVariants":false,"abAcquisitionsBannerFromGoogleDocTwoVariants":false,"abAcquisitionsBannerFromGoogleDocOneVariant":false,"abCommercialAdVerification":false,"abCommercialPrebidSafeframe":false,"abAcquisitionsEpicFromGoogleDocFiveVariants":false,"abAcquisitionsEpicFromGoogleDocFourVariants":false,"abAcquisitionsEpicFromGoogleDocThreeVariants":false,"abAcquisitionsEpicFromGoogleDocTwoVariants":false,"abAcquisitionsEpicFromGoogleDocOneVariant":false,"abAcquisitionsAustraliaEnvironmentCampaign2018":false,"abAcquisitionsUsGunCampaign2017":true,"abAcquisitionsEpicThankYou":true,"abAcquisitionsEpicAlwaysAskIfTagged":true,"abAcquisitionsEpicLiveblog":false,"abContributionsEpicAskFourEarning":true,"abCommercialOutbrainNewids":false,"abCommercialCmpCustomise":false,"abCommercialAdMobileWebIncrease":false,"oldTlsSupportDeprecation":false,"orielParticipation":false,"scAdFreeBanner":false,"weAreHiring":false,"youtubeRelatedVideos":true,"useTailorEndpoints":true,"targeting":false,"sharingComments":false,"smartAppBanner":false,"emailSignupEuRef":false,"emailSignupLabNotes":false,"emailInArticleOutbrain":true,"emailInArticleGtoday":true,"emailInArticle":true,"emailInlineInFooter":false,"crosswordSvgThumbnails":false,"historyTags":false,"weather":false,"breakingNews":false,"videojs":true,"enhanceTweets":false,"idProfileNavigation":true,"googleSearch":true,"webFonts":true,"mostViewedFronts":true,"extendedMostPopular":false,"geoMostPopular":true,"plistaForOutbrainAu":false,"outbrain":false,"serverShareCounts":true},"tests":{},"modules":{"tracking":{"ready":null}},"images":{"commercial":{"ab-icon":"/assets/images/commercial/ab-icon.png","abp-icon":"/assets/images/commercial/abp-icon.png","abp-whitelist-instruction-chrome":"/assets/images/commercial/ad-block-instructions-chrome.png"},"acquisitions":{"paypal-and-credit-card":"/assets/images/acquisitions/paypal-and-credit-card.png","info-logo":"/assets/images/acquisitions/info-logo.svg","ad-free":"/assets/images/acquisitions/ad-free.svg"},"journalism":{"apple-podcast-logo":"/assets/images/journalism/apple-podcast-icon-48.png"}},"stylesheets":{"fonts":{"hintingCleartype":{"kerningOn":"/assets/stylesheets/webfonts-hinting-cleartype-kerning-on.css"},"hintingOff":{"kerningOn":"/assets/stylesheets/webfonts-hinting-off-kerning-on.css"},"hintingAuto":{"kerningOn":"/assets/stylesheets/webfonts-hinting-auto-kerning-on.css"}}},"googleAnalytics":{"trackers":{"editorialTest":"guardianTestPropertyTracker","editorialProd":"allEditorialPropertyTracker","editorial":"guardianTestPropertyTracker"},"timingEvents":[]},"libs":{"googletag":"//www.googletagservices.com/tag/js/gpt.js","sonobi":"//api.nextgen.guardianapps.co.uk/morpheus.theguardian.12919.js","cmp":{"fullVendorDataUrl":"/assets/data/vendor/cmp_vendorlist.json"}},"ophan":{"pageViewId":"jqwdk27s2i3dwpji2ohh","browserId":null}}
                // this is a global that's called at the bottom of the pf.io response,
                // once the polyfills have run. This may be useful for debugging.
                // mainly to support browsers that don't support async=false or defer
                function guardianPolyfilled() {
                    try {
                        window.guardian.polyfilled = true;
                        window.guardian.onPolyfilled();
                    } catch (e) {};
                }
                (function() {
                    var firstScript = document.scripts[0];
                    [${priorityScripts.map(script =>
                        JSON.stringify(script),
                    )}].forEach(url => {
                        if ('async' in firstScript) {
                            // modern browsers
                            var script = document.createElement('script');
                            script.async = false;
                            script.src = url;
                            if (document.head) {
                                document.head.appendChild(script);
                            }
                        } else {
                            // fall back to defer
                            document.write('<script src="' + url + '" defer></' + 'script>');
                        }
                    });
                })();
                </script>
            </head>
            <body>
                <div id="app">${html}</div>
                ${lowPriorityScripts
                    .map(script => `<script async src="${script}"></script>`)
                    .join('\n')}
                <script>
                    ${nonBlockingJS}

                    try{(function(document,window){if(!window.__cmp)window.__cmp=function(){var listen=window.attachEvent||window.addEventListener;listen("message",function(event){window.__cmp.receiveMessage(event)},false);function addLocatorFrame(){if(!window.frames["__cmpLocator"])if(document.body){var frame=document.createElement("iframe");frame.style.display="none";frame.name="__cmpLocator";frame.setAttribute("aria-hidden",true);document.body.appendChild(frame)}else setTimeout(addLocatorFrame,5)}addLocatorFrame();
                    var commandQueue=[];var cmp=function(command,parameter,callback){if(command==="ping"){if(callback)callback({gdprAppliesGlobally:!!(window.__cmp&&window.__cmp.config&&window.__cmp.config.storeConsentGlobally),cmpLoaded:false})}else commandQueue.push({command:command,parameter:parameter,callback:callback})};cmp.commandQueue=commandQueue;cmp.receiveMessage=function(event){var data=event&&event.data&&event.data.__cmpCall;if(data)commandQueue.push({callId:data.callId,command:data.command,parameter:data.parameter,
                    event:event})};cmp.config={storeConsentGlobally:false,storePublisherData:false,logging:false,gdprApplies:false};return cmp}()})(document,window)}catch(e){throw e;};

                    try{(function(document,window){function shouldServeLotame(){try{var geo=JSON.parse(window.localStorage.getItem("gu.geolocation")).value;if(geo==="US"||geo==="CA"||geo==="AU"||geo==="NZ")return false;return true}catch(e){}return false}if(shouldServeLotame()){var script=document.createElement("script");script.src="https://tags.crwdcntrl.net/c/12666/cc.js";document.body.appendChild(script)}})(document,window)}catch(e){throw e;};
                </script>
            </body>
        </html>`;
};
